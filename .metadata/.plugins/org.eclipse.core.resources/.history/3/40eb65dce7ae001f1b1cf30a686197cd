/*
 * RNG_Driver.c
 *
 *  Created on: Nov 29, 2024
 *      Author: Arjun
 */


#include "RNG_Driver.h"

RNG_HandleTypeDef hrng;


uint32_t randNum;



void RNG_Init(){

	__HAL_RCC_RNG_CLK_ENABLE();

	hrng.Instance = RNG;
	HAL_RNG_Init(&hrng);

}


uint32_t RNG_GenRandNum(){

	HAL_RNG_GenerateRandomNumber(&hrng, &randNum);

	uint32_t rn = (randNum >> 29) + 2;

	while(rn == 9){

		rn = (randNum >> 29) + 2;
	}

//	if(rn == 9){
//
//		uint32_t s = (randNum >> 29) + 1;
//
//		rn -= s;
//
//		if(rn == 1){
//			rn = 2;
//		}
//
//	}

	if(rn == 9){
		while(1){
			;
		}
	}

	return rn;

}

